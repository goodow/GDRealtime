//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/retechretech/dev/workspace/realtime/realtime-operation/src/main/java/com/goodow/realtime/operation/impl/CollaborativeOperation.java
//
//  Created by retechretech.
//

#include "IOSClass.h"
#include "com/goodow/realtime/json/Json.h"
#include "com/goodow/realtime/json/JsonArray.h"
#include "com/goodow/realtime/json/JsonElement.h"
#include "com/goodow/realtime/json/JsonObject.h"
#include "com/goodow/realtime/operation/Operation.h"
#include "com/goodow/realtime/operation/OperationComponent.h"
#include "com/goodow/realtime/operation/impl/CollaborativeOperation.h"
#include "com/goodow/realtime/operation/impl/CollaborativeTransformer.h"
#include "com/goodow/realtime/operation/util/Pair.h"

@implementation ComGoodowRealtimeOperationImplCollaborativeOperation

NSString * ComGoodowRealtimeOperationImplCollaborativeOperation_UID_ = @"uid";
NSString * ComGoodowRealtimeOperationImplCollaborativeOperation_SID_ = @"sid";
NSString * ComGoodowRealtimeOperationImplCollaborativeOperation_OP_ = @"op";

- (id)initWithNSString:(NSString *)userId
          withNSString:(NSString *)sessionId
withComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)components {
  if (self = [super init]) {
    NSAssert(components != nil && [components indexOfWithId:nil] == -1, @"/Users/retechretech/dev/workspace/realtime/realtime-operation/src/main/java/com/goodow/realtime/operation/impl/CollaborativeOperation.java:32 condition failed: assert components != null && components.indexOf(null) == -1;");
    self->userId_ = userId;
    self->sessionId_ = sessionId;
    self->components_ = components;
  }
  return self;
}

- (void)applyWithId:(id)target {
  [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(components_)) forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeOperationImplCollaborativeOperation_$1 alloc] initWithId:target]];
}

- (BOOL)isEqual:(id)obj {
  if (self == obj) {
    return YES;
  }
  if (obj == nil) {
    return NO;
  }
  if (!([obj isKindOfClass:[ComGoodowRealtimeOperationImplCollaborativeOperation class]])) {
    return NO;
  }
  ComGoodowRealtimeOperationImplCollaborativeOperation *other = (ComGoodowRealtimeOperationImplCollaborativeOperation *) check_class_cast(obj, [ComGoodowRealtimeOperationImplCollaborativeOperation class]);
  if (components_ == nil) {
    if (((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->components_ != nil) {
      return NO;
    }
  }
  else if (![components_ isEqual:((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->components_]) {
    return NO;
  }
  if (sessionId_ == nil) {
    if (((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->sessionId_ != nil) {
      return NO;
    }
  }
  else if (![sessionId_ isEqual:((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->sessionId_]) {
    return NO;
  }
  if (userId_ == nil) {
    if (((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->userId_ != nil) {
      return NO;
    }
  }
  else if (![userId_ isEqual:((ComGoodowRealtimeOperationImplCollaborativeOperation *) nil_chk(other))->userId_]) {
    return NO;
  }
  return YES;
}

- (NSUInteger)hash {
  int prime = 31;
  int result = 1;
  result = prime * result + ((components_ == nil) ? 0 : ((int) [components_ hash]));
  result = prime * result + ((sessionId_ == nil) ? 0 : ((int) [sessionId_ hash]));
  result = prime * result + ((userId_ == nil) ? 0 : ((int) [userId_ hash]));
  return result;
}

- (ComGoodowRealtimeOperationImplCollaborativeOperation *)invert {
  int size = [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(components_)) length];
  id<ComGoodowRealtimeJsonJsonArray> invertedComponents = [ComGoodowRealtimeJsonJson createArray];
  for (int i = size - 1; i >= 0; i--) {
    id<ComGoodowRealtimeOperationOperation> inverted = [((id<ComGoodowRealtimeOperationOperation>) nil_chk([components_ getWithInt:i])) invert];
    if (inverted != nil) {
      (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(invertedComponents)) pushWithId:inverted];
    }
  }
  return [[ComGoodowRealtimeOperationImplCollaborativeOperation alloc] initWithNSString:userId_ withNSString:sessionId_ withComGoodowRealtimeJsonJsonArray:invertedComponents];
}

- (id<ComGoodowRealtimeJsonJsonObject>)toJson {
  id<ComGoodowRealtimeJsonJsonArray> op = [ComGoodowRealtimeJsonJson createArray];
  [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(components_)) forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeOperationImplCollaborativeOperation_$2 alloc] initWithComGoodowRealtimeJsonJsonArray:op]];
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([ComGoodowRealtimeJsonJson createObject])) setWithNSString:ComGoodowRealtimeOperationImplCollaborativeOperation_UID_ withId:userId_])) setWithNSString:ComGoodowRealtimeOperationImplCollaborativeOperation_SID_ withId:sessionId_])) setWithNSString:ComGoodowRealtimeOperationImplCollaborativeOperation_OP_ withId:op];
}

- (NSString *)description {
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([self toJson])) toJsonString];
}

- (ComGoodowRealtimeOperationImplCollaborativeOperation *)transformWithComGoodowRealtimeOperationOperation:(id<ComGoodowRealtimeOperationOperation>)other
                                                                                               withBoolean:(BOOL)applied {
  NSAssert([(id) other isKindOfClass:[ComGoodowRealtimeOperationImplCollaborativeOperation class]], @"/Users/retechretech/dev/workspace/realtime/realtime-operation/src/main/java/com/goodow/realtime/operation/impl/CollaborativeOperation.java:127 condition failed: assert other instanceof CollaborativeOperation;");
  ComGoodowRealtimeOperationImplCollaborativeTransformer *transformer = [[ComGoodowRealtimeOperationImplCollaborativeTransformer alloc] init];
  return applied ? ((ComGoodowRealtimeOperationUtilPair *) nil_chk([transformer transformWithId:(ComGoodowRealtimeOperationImplCollaborativeOperation *) check_class_cast(other, [ComGoodowRealtimeOperationImplCollaborativeOperation class]) withId:self]))->second_ : ((ComGoodowRealtimeOperationUtilPair *) nil_chk([transformer transformWithId:self withId:(ComGoodowRealtimeOperationImplCollaborativeOperation *) check_class_cast(other, [ComGoodowRealtimeOperationImplCollaborativeOperation class])]))->first_;
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeOperationImplCollaborativeOperation *)other {
  [super copyAllFieldsTo:other];
  other->components_ = components_;
  other->sessionId_ = sessionId_;
  other->userId_ = userId_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withNSString:withComGoodowRealtimeJsonJsonArray:", "CollaborativeOperation", NULL, 0x1, NULL },
    { "applyWithId:", "apply", "V", 0x1, NULL },
    { "isEqual:", "equals", "Z", 0x1, NULL },
    { "hash", "hashCode", "I", 0x1, NULL },
    { "invert", NULL, "Lcom.goodow.realtime.operation.impl.CollaborativeOperation;", 0x1, NULL },
    { "toJson", NULL, "Lcom.goodow.realtime.json.JsonObject;", 0x1, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL },
    { "transformWithComGoodowRealtimeOperationOperation:withBoolean:", "transform", "Lcom.goodow.realtime.operation.impl.CollaborativeOperation;", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "UID_", NULL, 0x19, "Ljava.lang.String;", &ComGoodowRealtimeOperationImplCollaborativeOperation_UID_,  },
    { "SID_", NULL, 0x19, "Ljava.lang.String;", &ComGoodowRealtimeOperationImplCollaborativeOperation_SID_,  },
    { "OP_", NULL, 0x19, "Ljava.lang.String;", &ComGoodowRealtimeOperationImplCollaborativeOperation_OP_,  },
    { "userId_", NULL, 0x11, "Ljava.lang.String;", NULL,  },
    { "sessionId_", NULL, 0x11, "Ljava.lang.String;", NULL,  },
    { "components_", NULL, 0x11, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeOperationImplCollaborativeOperation = { "CollaborativeOperation", "com.goodow.realtime.operation.impl", NULL, 0x1, 8, methods, 6, fields, 0, NULL};
  return &_ComGoodowRealtimeOperationImplCollaborativeOperation;
}

@end

@implementation ComGoodowRealtimeOperationImplCollaborativeOperation_$1

- (void)callWithInt:(int)index
             withId:(ComGoodowRealtimeOperationOperationComponent *)component {
  [((ComGoodowRealtimeOperationOperationComponent *) nil_chk(component)) applyWithId:val$target_];
}

- (id)initWithId:(id)capture$0 {
  val$target_ = capture$0;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithInt:withComGoodowRealtimeOperationOperationComponent:", "call", "V", 0x1, NULL },
    { "initWithId:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "val$target_", NULL, 0x1012, "Ljava.lang.Object;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeOperationImplCollaborativeOperation_$1 = { "$1", "com.goodow.realtime.operation.impl", "CollaborativeOperation", 0x8000, 2, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeOperationImplCollaborativeOperation_$1;
}

@end

@implementation ComGoodowRealtimeOperationImplCollaborativeOperation_$2

- (void)callWithInt:(int)index
             withId:(id<ComGoodowRealtimeOperationOperation>)component {
  (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(val$op_)) pushWithId:[((id<ComGoodowRealtimeOperationOperation>) nil_chk(component)) toJson]];
}

- (id)initWithComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)capture$0 {
  val$op_ = capture$0;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithInt:withComGoodowRealtimeOperationOperation:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeJsonJsonArray:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "val$op_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeOperationImplCollaborativeOperation_$2 = { "$2", "com.goodow.realtime.operation.impl", "CollaborativeOperation", 0x8000, 2, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeOperationImplCollaborativeOperation_$2;
}

@end
