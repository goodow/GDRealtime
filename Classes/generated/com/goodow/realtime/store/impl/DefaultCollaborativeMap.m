//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/retechretech/dev/workspace/realtime/realtime-store/src/main/java/com/goodow/realtime/store/impl/DefaultCollaborativeMap.java
//
//  Created by retechretech.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/goodow/realtime/core/Handler.h"
#include "com/goodow/realtime/core/Registration.h"
#include "com/goodow/realtime/json/Json.h"
#include "com/goodow/realtime/json/JsonArray.h"
#include "com/goodow/realtime/json/JsonObject.h"
#include "com/goodow/realtime/operation/Operation.h"
#include "com/goodow/realtime/operation/OperationComponent.h"
#include "com/goodow/realtime/operation/create/CreateComponent.h"
#include "com/goodow/realtime/operation/map/json/JsonMapComponent.h"
#include "com/goodow/realtime/store/CollaborativeObject.h"
#include "com/goodow/realtime/store/EventType.h"
#include "com/goodow/realtime/store/ValueChangedEvent.h"
#include "com/goodow/realtime/store/impl/DefaultCollaborativeMap.h"
#include "com/goodow/realtime/store/impl/DefaultCollaborativeObject.h"
#include "com/goodow/realtime/store/impl/DefaultModel.h"
#include "com/goodow/realtime/store/impl/DefaultValueChangedEvent.h"
#include "com/goodow/realtime/store/impl/JsonSerializer.h"
#include "java/lang/IllegalArgumentException.h"

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap

- (id)initWithComGoodowRealtimeStoreImplDefaultModel:(ComGoodowRealtimeStoreImplDefaultModel *)model {
  if (self = [super initWithComGoodowRealtimeStoreImplDefaultModel:model]) {
    snapshot_ = [ComGoodowRealtimeJsonJson createObject];
  }
  return self;
}

- (id<ComGoodowRealtimeCoreRegistration>)onValueChangedWithComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  return [self addEventListenerWithComGoodowRealtimeStoreEventTypeEnum:ComGoodowRealtimeStoreEventTypeEnum_get_VALUE_CHANGED() withComGoodowRealtimeCoreHandler:handler withBoolean:NO];
}

- (void)clear {
  [((ComGoodowRealtimeStoreImplDefaultModel *) nil_chk(model_)) beginCompoundOperationWithNSString:@"map.clear"];
  [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk([self keys])) forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$1 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self]];
  [model_ endCompoundOperation];
}

- (id)getWithNSString:(NSString *)key {
  [self checkKeyWithNSString:key];
  return (id) [ComGoodowRealtimeStoreImplJsonSerializer deserializeObjectWithComGoodowRealtimeJsonJsonArray:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) getArrayWithNSString:key] withComGoodowRealtimeJsonJsonObject:((ComGoodowRealtimeStoreImplDefaultModel *) nil_chk(model_))->objects_];
}

- (BOOL)hasWithNSString:(NSString *)key {
  [self checkKeyWithNSString:key];
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) hasWithNSString:key];
}

- (BOOL)isEmpty {
  return [self size] == 0;
}

- (id<ComGoodowRealtimeJsonJsonArray>)items {
  id<ComGoodowRealtimeJsonJsonArray> items = [ComGoodowRealtimeJsonJson createArray];
  [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) forEachWithComGoodowRealtimeJsonJsonObject_MapIterator:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$2 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self withComGoodowRealtimeJsonJsonArray:items]];
  return items;
}

- (id<ComGoodowRealtimeJsonJsonArray>)keys {
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) keys];
}

- (id)removeWithNSString:(NSString *)key {
  [self checkKeyWithNSString:key];
  id oldValue = [self getWithNSString:key];
  if (oldValue == nil) {
    return nil;
  }
  ComGoodowRealtimeOperationMapJsonJsonMapComponent *op = [[ComGoodowRealtimeOperationMapJsonJsonMapComponent alloc] initWithNSString:id__ withNSString:key withComGoodowRealtimeJsonJsonElement:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) getArrayWithNSString:key] withComGoodowRealtimeJsonJsonElement:nil];
  [self consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
  return oldValue;
}

- (id)setWithNSString:(NSString *)key
               withId:(id)value {
  [self checkKeyWithNSString:key];
  id<ComGoodowRealtimeJsonJsonArray> serializedValue = [ComGoodowRealtimeStoreImplJsonSerializer serializeObjectWithId:value];
  id oldObject = [self getWithNSString:key];
  id<ComGoodowRealtimeJsonJsonArray> oldValue = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) getArrayWithNSString:key];
  if (![ComGoodowRealtimeOperationMapJsonJsonMapComponent jsonEqualsWithComGoodowRealtimeJsonJsonElement:oldValue withComGoodowRealtimeJsonJsonElement:serializedValue]) {
    ComGoodowRealtimeOperationMapJsonJsonMapComponent *op = [[ComGoodowRealtimeOperationMapJsonJsonMapComponent alloc] initWithNSString:id__ withNSString:key withComGoodowRealtimeJsonJsonElement:oldValue withComGoodowRealtimeJsonJsonElement:serializedValue];
    [self consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
  }
  return oldObject;
}

- (int)size {
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) size];
}

- (id<ComGoodowRealtimeJsonJsonObject>)toJson {
  id<ComGoodowRealtimeJsonJsonObject> json = [ComGoodowRealtimeJsonJson createObject];
  [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) forEachWithComGoodowRealtimeJsonJsonObject_MapIterator:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$3 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self withComGoodowRealtimeJsonJsonObject:json]];
  return json;
}

- (id<ComGoodowRealtimeJsonJsonArray>)values {
  id<ComGoodowRealtimeJsonJsonArray> values = [ComGoodowRealtimeJsonJson createArray];
  [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) forEachWithComGoodowRealtimeJsonJsonObject_MapIterator:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$4 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self withComGoodowRealtimeJsonJsonArray:values]];
  return values;
}

- (void)consumeWithNSString:(NSString *)userId
               withNSString:(NSString *)sessionId
withComGoodowRealtimeOperationOperationComponent:(ComGoodowRealtimeOperationOperationComponent *)component {
  [((id<ComGoodowRealtimeOperationOperation>) nil_chk(((id<ComGoodowRealtimeOperationOperation>) check_protocol_cast(component, @protocol(ComGoodowRealtimeOperationOperation))))) applyWithId:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$5 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self withNSString:sessionId withNSString:userId withComGoodowRealtimeOperationOperationComponent:component]];
}

- (IOSObjectArray *)toInitialization {
  IOSObjectArray *toRtn = [IOSObjectArray arrayWithLength:1 + [self size] type:[IOSClass classWithClass:[ComGoodowRealtimeOperationOperationComponent class]]];
  (void) IOSObjectArray_Set(toRtn, 0, [[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:id__ withInt:ComGoodowRealtimeOperationCreateCreateComponent_MAP]);
  if (![self isEmpty]) {
    [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) forEachWithComGoodowRealtimeJsonJsonObject_MapIterator:[[ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$6 alloc] initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:self withComGoodowRealtimeOperationOperationComponentArray:toRtn]];
  }
  return toRtn;
}

- (void)checkKeyWithNSString:(NSString *)key {
  if (key == nil) {
    @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:@"Expected string for key, but was: null"];
  }
}

- (void)putAndFireEventWithNSString:(NSString *)key
 withComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)newValue
                       withNSString:(NSString *)sessionId
                       withNSString:(NSString *)userId {
  NSAssert(nil != newValue, @"/Users/retechretech/dev/workspace/realtime/realtime-store/src/main/java/com/goodow/realtime/store/impl/DefaultCollaborativeMap.java:186 condition failed: assert null != newValue;");
  id newObject = [ComGoodowRealtimeStoreImplJsonSerializer deserializeObjectWithComGoodowRealtimeJsonJsonArray:newValue withComGoodowRealtimeJsonJsonObject:((ComGoodowRealtimeStoreImplDefaultModel *) nil_chk(model_))->objects_];
  id<ComGoodowRealtimeStoreValueChangedEvent> event = [[ComGoodowRealtimeStoreImplDefaultValueChangedEvent alloc] initWithComGoodowRealtimeJsonJsonObject:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([self eventWithNSString:sessionId withNSString:userId])) setWithNSString:@"property" withId:key])) setWithNSString:@"oldValue" withId:[self getWithNSString:key]])) setWithNSString:@"newValue" withId:newObject]];
  if ([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) hasWithNSString:key]) {
    id<ComGoodowRealtimeJsonJsonArray> oldValue = [snapshot_ getArrayWithNSString:key];
    [model_ addOrRemoveParentWithComGoodowRealtimeJsonJsonArray:oldValue withNSString:id__ withBoolean:NO];
    model_->bytesUsed_ -= ((int) [((NSString *) nil_chk([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(oldValue)) toJsonString])) length]);
  }
  (void) [snapshot_ setWithNSString:key withId:newValue];
  [model_ addOrRemoveParentWithComGoodowRealtimeJsonJsonArray:newValue withNSString:id__ withBoolean:YES];
  [self fireEventWithComGoodowRealtimeStoreBaseModelEvent:event];
  model_->bytesUsed_ += ((int) [((NSString *) nil_chk([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(newValue)) toJsonString])) length]);
}

- (void)removeAndFireEventWithNSString:(NSString *)key
                          withNSString:(NSString *)sessionId
                          withNSString:(NSString *)userId {
  NSAssert([self hasWithNSString:key], @"/Users/retechretech/dev/workspace/realtime/realtime-store/src/main/java/com/goodow/realtime/store/impl/DefaultCollaborativeMap.java:203 condition failed: assert has(key);");
  id<ComGoodowRealtimeJsonJsonArray> oldValue = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(snapshot_)) getArrayWithNSString:key];
  id<ComGoodowRealtimeStoreValueChangedEvent> event = [[ComGoodowRealtimeStoreImplDefaultValueChangedEvent alloc] initWithComGoodowRealtimeJsonJsonObject:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([self eventWithNSString:sessionId withNSString:userId])) setWithNSString:@"property" withId:key])) setWithNSString:@"oldValue" withId:[self getWithNSString:key]])) setWithNSString:@"newValue" withId:nil]];
  (void) [snapshot_ removeWithNSString:key];
  [((ComGoodowRealtimeStoreImplDefaultModel *) nil_chk(model_)) addOrRemoveParentWithComGoodowRealtimeJsonJsonArray:oldValue withNSString:id__ withBoolean:NO];
  [self fireEventWithComGoodowRealtimeStoreBaseModelEvent:event];
  model_->bytesUsed_ -= ((int) [((NSString *) nil_chk([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(oldValue)) toJsonString])) length]);
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)other {
  [super copyAllFieldsTo:other];
  other->snapshot_ = snapshot_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "initWithComGoodowRealtimeStoreImplDefaultModel:", "DefaultCollaborativeMap", NULL, 0x0, NULL },
    { "onValueChangedWithComGoodowRealtimeCoreHandler:", "onValueChanged", "Lcom.goodow.realtime.core.Registration;", 0x1, NULL },
    { "clear", NULL, "V", 0x1, NULL },
    { "getWithNSString:", "get", "TT;", 0x1, NULL },
    { "hasWithNSString:", "has", "Z", 0x1, NULL },
    { "isEmpty", NULL, "Z", 0x1, NULL },
    { "items", NULL, "Lcom.goodow.realtime.json.JsonArray;", 0x1, NULL },
    { "keys", NULL, "Lcom.goodow.realtime.json.JsonArray;", 0x1, NULL },
    { "removeWithNSString:", "remove", "TT;", 0x1, NULL },
    { "setWithNSString:withId:", "set", "TT;", 0x1, NULL },
    { "size", NULL, "I", 0x1, NULL },
    { "toJson", NULL, "Lcom.goodow.realtime.json.JsonObject;", 0x1, NULL },
    { "values", NULL, "Lcom.goodow.realtime.json.JsonArray;", 0x1, NULL },
    { "consumeWithNSString:withNSString:withComGoodowRealtimeOperationOperationComponent:", "consume", "V", 0x4, NULL },
    { "toInitialization", NULL, "[Lcom.goodow.realtime.operation.OperationComponent;", 0x0, NULL },
    { "checkKeyWithNSString:", "checkKey", "V", 0x2, NULL },
    { "putAndFireEventWithNSString:withComGoodowRealtimeJsonJsonArray:withNSString:withNSString:", "putAndFireEvent", "V", 0x2, NULL },
    { "removeAndFireEventWithNSString:withNSString:withNSString:", "removeAndFireEvent", "V", 0x2, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "snapshot_", NULL, 0x12, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap = { "DefaultCollaborativeMap", "com.goodow.realtime.store.impl", NULL, 0x0, 18, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$1

- (void)callWithInt:(int)index
             withId:(NSString *)key {
  (void) [this$0_ removeWithNSString:key];
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$ {
  this$0_ = outer$;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithInt:withNSString:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$1 = { "$1", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$1;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$2

- (void)callWithNSString:(NSString *)key
                  withId:(id<ComGoodowRealtimeJsonJsonArray>)value {
  id<ComGoodowRealtimeJsonJsonArray> item = [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk([ComGoodowRealtimeJsonJson createArray])) pushWithId:key])) pushWithId:[this$0_ getWithNSString:key]];
  (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(val$items_)) pushWithId:item];
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$
                             withComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)capture$0 {
  this$0_ = outer$;
  val$items_ = capture$0;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithNSString:withComGoodowRealtimeJsonJsonArray:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:withComGoodowRealtimeJsonJsonArray:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
    { "val$items_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$2 = { "$2", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 2, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$2;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$3

- (void)callWithNSString:(NSString *)key
                  withId:(id<ComGoodowRealtimeJsonJsonArray>)value {
  id val = [this$0_ getWithNSString:key];
  if ([val conformsToProtocol: @protocol(ComGoodowRealtimeStoreCollaborativeObject)]) {
    (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(val$json_)) setWithNSString:key withId:[((id<ComGoodowRealtimeStoreCollaborativeObject>) nil_chk(((id<ComGoodowRealtimeStoreCollaborativeObject>) check_protocol_cast(val, @protocol(ComGoodowRealtimeStoreCollaborativeObject))))) toJson]];
  }
  else {
    (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(val$json_)) setWithNSString:key withId:[((id<ComGoodowRealtimeJsonJsonArray>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(this$0_->snapshot_)) getArrayWithNSString:key])) getWithInt:1]];
  }
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$
                            withComGoodowRealtimeJsonJsonObject:(id<ComGoodowRealtimeJsonJsonObject>)capture$0 {
  this$0_ = outer$;
  val$json_ = capture$0;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithNSString:withComGoodowRealtimeJsonJsonArray:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:withComGoodowRealtimeJsonJsonObject:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
    { "val$json_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$3 = { "$3", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 2, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$3;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$4

- (void)callWithNSString:(NSString *)key
                  withId:(id<ComGoodowRealtimeJsonJsonArray>)value {
  (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(val$values_)) pushWithId:[this$0_ getWithNSString:key]];
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$
                             withComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)capture$0 {
  this$0_ = outer$;
  val$values_ = capture$0;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithNSString:withComGoodowRealtimeJsonJsonArray:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:withComGoodowRealtimeJsonJsonArray:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
    { "val$values_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$4 = { "$4", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 2, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$4;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$5

- (void)setWithNSString:(NSString *)key
                 withId:(id<ComGoodowRealtimeJsonJsonArray>)newValue {
  if (newValue == nil) {
    [this$0_ removeAndFireEventWithNSString:key withNSString:val$sessionId_ withNSString:val$userId_];
    ((ComGoodowRealtimeStoreImplDefaultModel *) nil_chk(this$0_->model_))->bytesUsed_ -= ((int) [((NSString *) nil_chk([((ComGoodowRealtimeOperationOperationComponent *) nil_chk(val$component_)) description])) length]);
    this$0_->model_->bytesUsed_ -= 2;
  }
  else {
    [this$0_ putAndFireEventWithNSString:key withComGoodowRealtimeJsonJsonArray:newValue withNSString:val$sessionId_ withNSString:val$userId_];
  }
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$
                                                   withNSString:(NSString *)capture$0
                                                   withNSString:(NSString *)capture$1
               withComGoodowRealtimeOperationOperationComponent:(ComGoodowRealtimeOperationOperationComponent *)capture$2 {
  this$0_ = outer$;
  val$sessionId_ = capture$0;
  val$userId_ = capture$1;
  val$component_ = capture$2;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "setWithNSString:withComGoodowRealtimeJsonJsonArray:", "set", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:withNSString:withNSString:withComGoodowRealtimeOperationOperationComponent:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
    { "val$sessionId_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$userId_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$component_", NULL, 0x1012, "Lcom.goodow.realtime.operation.OperationComponent;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$5 = { "$5", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 4, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$5;
}

@end

@implementation ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$6

- (void)callWithNSString:(NSString *)key
                  withId:(id<ComGoodowRealtimeJsonJsonArray>)value {
  (void) IOSObjectArray_Set(nil_chk(val$toRtn_), i_++, [[ComGoodowRealtimeOperationMapJsonJsonMapComponent alloc] initWithNSString:this$0_->id__ withNSString:key withComGoodowRealtimeJsonJsonElement:nil withComGoodowRealtimeJsonJsonElement:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(this$0_->snapshot_)) getArrayWithNSString:key]]);
}

- (id)initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap *)outer$
          withComGoodowRealtimeOperationOperationComponentArray:(IOSObjectArray *)capture$0 {
  this$0_ = outer$;
  val$toRtn_ = capture$0;
  if (self = [super init]) {
    i_ = 1;
  }
  return self;
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$6 *)other {
  [super copyAllFieldsTo:other];
  other->i_ = i_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "callWithNSString:withComGoodowRealtimeJsonJsonArray:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplDefaultCollaborativeMap:withComGoodowRealtimeOperationOperationComponentArray:", "init", NULL, 0x0, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.DefaultCollaborativeMap;", NULL,  },
    { "i_", NULL, 0x0, "I", NULL,  },
    { "val$toRtn_", NULL, 0x1012, "[Lcom.goodow.realtime.operation.OperationComponent;", NULL,  },
  };
  static J2ObjcClassInfo _ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$6 = { "$6", "com.goodow.realtime.store.impl", "DefaultCollaborativeMap", 0x8000, 2, methods, 3, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplDefaultCollaborativeMap_$6;
}

@end
