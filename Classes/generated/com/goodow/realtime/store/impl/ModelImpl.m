//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/larry/dev/workspace/realtime/realtime-store/src/main/java/com/goodow/realtime/store/impl/ModelImpl.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/goodow/realtime/channel/util/IdGenerator.h"
#include "com/goodow/realtime/core/Handler.h"
#include "com/goodow/realtime/core/Registration.h"
#include "com/goodow/realtime/json/Json.h"
#include "com/goodow/realtime/json/JsonArray.h"
#include "com/goodow/realtime/json/JsonObject.h"
#include "com/goodow/realtime/operation/create/CreateComponent.h"
#include "com/goodow/realtime/operation/cursor/ReferenceShiftedComponent.h"
#include "com/goodow/realtime/operation/list/AbstractListComponent.h"
#include "com/goodow/realtime/operation/list/json/JsonInsertComponent.h"
#include "com/goodow/realtime/operation/list/string/StringInsertComponent.h"
#include "com/goodow/realtime/operation/map/json/JsonMapComponent.h"
#include "com/goodow/realtime/store/CollaborativeList.h"
#include "com/goodow/realtime/store/CollaborativeMap.h"
#include "com/goodow/realtime/store/CollaborativeObject.h"
#include "com/goodow/realtime/store/CollaborativeString.h"
#include "com/goodow/realtime/store/EventType.h"
#include "com/goodow/realtime/store/IndexReference.h"
#include "com/goodow/realtime/store/Model.h"
#include "com/goodow/realtime/store/impl/DocumentBridge.h"
#include "com/goodow/realtime/store/impl/DocumentImpl.h"
#include "com/goodow/realtime/store/impl/IndexReferenceImpl.h"
#include "com/goodow/realtime/store/impl/JsonSerializer.h"
#include "com/goodow/realtime/store/impl/ModelImpl.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/util/logging/Logger.h"

__attribute__((unused)) static void ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(ComGoodowRealtimeStoreImplModelImpl *self);
__attribute__((unused)) static NSString *ComGoodowRealtimeStoreImplModelImpl_generateObjectId(ComGoodowRealtimeStoreImplModelImpl *self);
__attribute__((unused)) static void ComGoodowRealtimeStoreImplModelImpl_registerIndexReferenceWithNSString_withNSString_(ComGoodowRealtimeStoreImplModelImpl *self, NSString *indexReference, NSString *referencedObject);

@interface ComGoodowRealtimeStoreImplModelImpl () {
 @public
  jboolean isReadOnly_;
  id<ComGoodowRealtimeJsonJsonObject> parents_;
  id<ComGoodowRealtimeJsonJsonObject> indexReferences_;
}

- (void)beginCreationCompoundOperation;

- (NSString *)generateObjectId;

- (void)registerIndexReferenceWithNSString:(NSString *)indexReference
                              withNSString:(NSString *)referencedObject;
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl, parents_, id<ComGoodowRealtimeJsonJsonObject>)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl, indexReferences_, id<ComGoodowRealtimeJsonJsonObject>)

@interface ComGoodowRealtimeStoreImplModelImpl_$1 () {
 @public
  ComGoodowRealtimeStoreImplModelImpl *this$0_;
  NSString *val$id_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$1, this$0_, ComGoodowRealtimeStoreImplModelImpl *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$1, val$id_, NSString *)

@interface ComGoodowRealtimeStoreImplModelImpl_$2 () {
 @public
  id<ComGoodowRealtimeJsonJsonArray> val$toRtn_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$2, val$toRtn_, id<ComGoodowRealtimeJsonJsonArray>)

@interface ComGoodowRealtimeStoreImplModelImpl_$3 () {
 @public
  ComGoodowRealtimeStoreImplModelImpl *this$0_;
  ComGoodowRealtimeOperationListAbstractListComponent *val$op_;
  NSString *val$userId_;
  NSString *val$sessionId_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$3, this$0_, ComGoodowRealtimeStoreImplModelImpl *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$3, val$op_, ComGoodowRealtimeOperationListAbstractListComponent *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$3, val$userId_, NSString *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeStoreImplModelImpl_$3, val$sessionId_, NSString *)

BOOL ComGoodowRealtimeStoreImplModelImpl_initialized = NO;

@implementation ComGoodowRealtimeStoreImplModelImpl

NSString * ComGoodowRealtimeStoreImplModelImpl_ROOT_ID_ = @"root";
JavaUtilLoggingLogger * ComGoodowRealtimeStoreImplModelImpl_log_;

- (instancetype)initWithComGoodowRealtimeStoreImplDocumentBridge:(ComGoodowRealtimeStoreImplDocumentBridge *)bridge
                      withComGoodowRealtimeStoreImplDocumentImpl:(ComGoodowRealtimeStoreImplDocumentImpl *)document {
  if (self = [super init]) {
    objects_ = ComGoodowRealtimeJsonJson_createObject();
    parents_ = ComGoodowRealtimeJsonJson_createObject();
    self->bridge_ = bridge;
    self->document_ = document;
  }
  return self;
}

- (id<ComGoodowRealtimeCoreRegistration>)onUndoRedoStateChangedWithComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  return [((ComGoodowRealtimeStoreImplDocumentImpl *) nil_chk(document_)) addEventListenerWithNSString:nil withComGoodowRealtimeStoreEventTypeEnum:ComGoodowRealtimeStoreEventTypeEnum_get_UNDO_REDO_STATE_CHANGED() withComGoodowRealtimeCoreHandler:handler withBoolean:NO];
}

- (void)beginCompoundOperationWithNSString:(NSString *)opt_name {
  [((JavaUtilLoggingLogger *) nil_chk(ComGoodowRealtimeStoreImplModelImpl_log_)) finerWithNSString:JreStrcat("$$", @"beginCompoundOperation", (opt_name == nil ? @"" : (JreStrcat("C$", ' ', opt_name))))];
}

- (jboolean)canRedo {
  return canRedo__;
}

- (jboolean)canUndo {
  return canUndo__;
}

- (id)createWithNSString:(NSString *)ref
       withNSObjectArray:(IOSObjectArray *)var_args {
  @throw [[JavaLangUnsupportedOperationException alloc] init];
}

- (id)createJsObjectWithNSString:(NSString *)ref {
  @throw [[JavaLangUnsupportedOperationException alloc] init];
}

- (id<ComGoodowRealtimeStoreCollaborativeList>)createListWithComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)opt_initialValue {
  NSString *id_ = ComGoodowRealtimeStoreImplModelImpl_generateObjectId(self);
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:id_ withInt:ComGoodowRealtimeOperationCreateCreateComponent_LIST]];
  if (opt_initialValue != nil && [opt_initialValue length] > 0) {
    id<ComGoodowRealtimeJsonJsonArray> values = ComGoodowRealtimeStoreImplJsonSerializer_serializeObjectsWithComGoodowRealtimeJsonJsonArray_(opt_initialValue);
    ComGoodowRealtimeOperationListJsonJsonInsertComponent *op = [[ComGoodowRealtimeOperationListJsonJsonInsertComponent alloc] initWithNSString:id_ withInt:0 withComGoodowRealtimeJsonJsonArray:values];
    [bridge_ consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
  }
  [self endCompoundOperation];
  return [self getObjectWithNSString:id_];
}

- (id<ComGoodowRealtimeStoreCollaborativeMap>)createMapWithComGoodowRealtimeJsonJsonObject:(id<ComGoodowRealtimeJsonJsonObject>)opt_initialValue {
  NSString *id_ = ComGoodowRealtimeStoreImplModelImpl_generateObjectId(self);
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:id_ withInt:ComGoodowRealtimeOperationCreateCreateComponent_MAP]];
  if (opt_initialValue != nil && [opt_initialValue size] != 0) {
    [opt_initialValue forEachWithComGoodowRealtimeJsonJsonObject_MapIterator:[[ComGoodowRealtimeStoreImplModelImpl_$1 alloc] initWithComGoodowRealtimeStoreImplModelImpl:self withNSString:id_]];
  }
  [self endCompoundOperation];
  return [self getObjectWithNSString:id_];
}

- (id<ComGoodowRealtimeStoreCollaborativeString>)createStringWithNSString:(NSString *)opt_initialValue {
  NSString *id_ = ComGoodowRealtimeStoreImplModelImpl_generateObjectId(self);
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:id_ withInt:ComGoodowRealtimeOperationCreateCreateComponent_STRING]];
  if (opt_initialValue != nil && ![opt_initialValue isEmpty]) {
    ComGoodowRealtimeOperationListStringStringInsertComponent *op = [[ComGoodowRealtimeOperationListStringStringInsertComponent alloc] initWithNSString:id_ withInt:0 withNSString:opt_initialValue];
    [bridge_ consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
  }
  [self endCompoundOperation];
  return [self getObjectWithNSString:id_];
}

- (void)endCompoundOperation {
  [((JavaUtilLoggingLogger *) nil_chk(ComGoodowRealtimeStoreImplModelImpl_log_)) finerWithNSString:@"endCompoundOperation"];
}

- (id)getObjectWithNSString:(NSString *)objectId {
  return [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(objects_)) getWithNSString:objectId];
}

- (id<ComGoodowRealtimeJsonJsonArray>)getParentsWithNSString:(NSString *)objectId {
  id<ComGoodowRealtimeJsonJsonArray> list = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(parents_)) getArrayWithNSString:objectId];
  id<ComGoodowRealtimeJsonJsonArray> toRtn = ComGoodowRealtimeJsonJson_createArray();
  if (list != nil) {
    [list forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeStoreImplModelImpl_$2 alloc] initWithComGoodowRealtimeJsonJsonArray:toRtn]];
  }
  return toRtn;
}

- (id<ComGoodowRealtimeStoreCollaborativeMap>)getRoot {
  return [self getObjectWithNSString:ComGoodowRealtimeStoreImplModelImpl_ROOT_ID_];
}

- (void)initJsObjectWithId:(id)obj {
  @throw [[JavaLangUnsupportedOperationException alloc] init];
}

- (jboolean)isInitialized {
  return NO;
}

- (void)redo {
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) redo];
}

- (void)undo {
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) undo];
}

- (void)addOrRemoveParentWithComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)childOrNull
                                               withNSString:(NSString *)parentId
                                                withBoolean:(jboolean)isAdd {
  if (childOrNull == nil) {
    return;
  }
  if ([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(childOrNull)) getNumberWithInt:0] == ComGoodowRealtimeStoreImplJsonSerializer_REFERENCE_TYPE) {
    NSString *childId = [childOrNull getStringWithInt:1];
    id<ComGoodowRealtimeJsonJsonArray> list = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(parents_)) getArrayWithNSString:childId];
    if (isAdd) {
      if (list == nil) {
        list = ComGoodowRealtimeJsonJson_createArray();
        (void) [parents_ setWithNSString:childId withId:list];
      }
      (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(list)) pushWithId:parentId];
    }
    else {
      NSAssert(list != nil && [list indexOfWithId:parentId] != -1, @"com/goodow/realtime/store/impl/ModelImpl.java:239 condition failed: assert list != null && list.indexOf(parentId) != -1;");
      [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(list)) removeValueWithId:parentId];
      if ([list length] == 0) {
        (void) [parents_ removeWithNSString:childId];
      }
    }
  }
}

- (id<ComGoodowRealtimeStoreIndexReference>)createIndexReferenceWithNSString:(NSString *)referencedObjectId
                                                                     withInt:(jint)index
                                                                 withBoolean:(jboolean)canBeDeleted {
  NSString *id_ = ComGoodowRealtimeStoreImplModelImpl_generateObjectId(self);
  ComGoodowRealtimeOperationCursorReferenceShiftedComponent *op = [[ComGoodowRealtimeOperationCursorReferenceShiftedComponent alloc] initWithNSString:id_ withNSString:referencedObjectId withInt:index withBoolean:canBeDeleted withInt:-1];
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:id_ withInt:ComGoodowRealtimeOperationCreateCreateComponent_INDEX_REFERENCE]];
  [bridge_ consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
  ComGoodowRealtimeStoreImplModelImpl_registerIndexReferenceWithNSString_withNSString_(self, id_, referencedObjectId);
  [self endCompoundOperation];
  return [self getObjectWithNSString:id_];
}

- (void)createRoot {
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCreateCreateComponent alloc] initWithNSString:ComGoodowRealtimeStoreImplModelImpl_ROOT_ID_ withInt:ComGoodowRealtimeOperationCreateCreateComponent_MAP]];
  [self endCompoundOperation];
}

- (void)transformCursorWithComGoodowRealtimeOperationListAbstractListComponent:(ComGoodowRealtimeOperationListAbstractListComponent *)op
                                                                  withNSString:(NSString *)userId
                                                                  withNSString:(NSString *)sessionId {
  if (indexReferences_ == nil) {
    return;
  }
  id<ComGoodowRealtimeJsonJsonArray> cursors = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(indexReferences_)) getArrayWithNSString:((ComGoodowRealtimeOperationListAbstractListComponent *) nil_chk(op))->id__];
  if (cursors != nil) {
    [cursors forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeStoreImplModelImpl_$3 alloc] initWithComGoodowRealtimeStoreImplModelImpl:self withComGoodowRealtimeOperationListAbstractListComponent:op withNSString:userId withNSString:sessionId]];
  }
}

- (void)beginCreationCompoundOperation {
  ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(self);
}

- (NSString *)generateObjectId {
  return ComGoodowRealtimeStoreImplModelImpl_generateObjectId(self);
}

- (void)registerIndexReferenceWithNSString:(NSString *)indexReference
                              withNSString:(NSString *)referencedObject {
  ComGoodowRealtimeStoreImplModelImpl_registerIndexReferenceWithNSString_withNSString_(self, indexReference, referencedObject);
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplModelImpl *)other {
  [super copyAllFieldsTo:other];
  other->isReadOnly_ = isReadOnly_;
  other->canUndo__ = canUndo__;
  other->canRedo__ = canRedo__;
  other->objects_ = objects_;
  other->parents_ = parents_;
  other->indexReferences_ = indexReferences_;
  other->document_ = document_;
  other->bridge_ = bridge_;
  other->bytesUsed_ = bytesUsed_;
  other->serverVersion_ = serverVersion_;
}

+ (void)initialize {
  if (self == [ComGoodowRealtimeStoreImplModelImpl class]) {
    ComGoodowRealtimeStoreImplModelImpl_log_ = JavaUtilLoggingLogger_getLoggerWithNSString_([ComGoodowRealtimeStoreModel_class_() getName]);
    J2OBJC_SET_INITIALIZED(ComGoodowRealtimeStoreImplModelImpl)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComGoodowRealtimeStoreImplDocumentBridge:withComGoodowRealtimeStoreImplDocumentImpl:", "ModelImpl", NULL, 0x0, NULL },
    { "onUndoRedoStateChangedWithComGoodowRealtimeCoreHandler:", "onUndoRedoStateChanged", "Lcom.goodow.realtime.core.Registration;", 0x1, NULL },
    { "beginCompoundOperationWithNSString:", "beginCompoundOperation", "V", 0x1, NULL },
    { "canRedo", NULL, "Z", 0x1, NULL },
    { "canUndo", NULL, "Z", 0x1, NULL },
    { "createWithNSString:withNSObjectArray:", "create", "Ljava.lang.Object;", 0x81, NULL },
    { "createJsObjectWithNSString:", "createJsObject", "Ljava.lang.Object;", 0x1, NULL },
    { "createListWithComGoodowRealtimeJsonJsonArray:", "createList", "Lcom.goodow.realtime.store.CollaborativeList;", 0x1, NULL },
    { "createMapWithComGoodowRealtimeJsonJsonObject:", "createMap", "Lcom.goodow.realtime.store.CollaborativeMap;", 0x1, NULL },
    { "createStringWithNSString:", "createString", "Lcom.goodow.realtime.store.CollaborativeString;", 0x1, NULL },
    { "endCompoundOperation", NULL, "V", 0x1, NULL },
    { "getObjectWithNSString:", "getObject", "TT;", 0x1, NULL },
    { "getParentsWithNSString:", "getParents", "Lcom.goodow.realtime.json.JsonArray;", 0x1, NULL },
    { "getRoot", NULL, "Lcom.goodow.realtime.store.CollaborativeMap;", 0x1, NULL },
    { "initJsObjectWithId:", "initJsObject", "V", 0x1, NULL },
    { "isInitialized", NULL, "Z", 0x1, NULL },
    { "redo", NULL, "V", 0x1, NULL },
    { "undo", NULL, "V", 0x1, NULL },
    { "addOrRemoveParentWithComGoodowRealtimeJsonJsonArray:withNSString:withBoolean:", "addOrRemoveParent", "V", 0x0, NULL },
    { "createIndexReferenceWithNSString:withInt:withBoolean:", "createIndexReference", "Lcom.goodow.realtime.store.IndexReference;", 0x0, NULL },
    { "createRoot", NULL, "V", 0x0, NULL },
    { "transformCursorWithComGoodowRealtimeOperationListAbstractListComponent:withNSString:withNSString:", "transformCursor", "V", 0x0, NULL },
    { "beginCreationCompoundOperation", NULL, "V", 0x2, NULL },
    { "generateObjectId", NULL, "Ljava.lang.String;", 0x2, NULL },
    { "registerIndexReferenceWithNSString:withNSString:", "registerIndexReference", "V", 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ROOT_ID_", NULL, 0x1a, "Ljava.lang.String;", &ComGoodowRealtimeStoreImplModelImpl_ROOT_ID_,  },
    { "log_", NULL, 0x1a, "Ljava.util.logging.Logger;", &ComGoodowRealtimeStoreImplModelImpl_log_,  },
    { "isReadOnly_", NULL, 0x2, "Z", NULL,  },
    { "canUndo__", "canUndo", 0x0, "Z", NULL,  },
    { "canRedo__", "canRedo", 0x0, "Z", NULL,  },
    { "objects_", NULL, 0x10, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
    { "parents_", NULL, 0x12, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
    { "indexReferences_", NULL, 0x2, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
    { "document_", NULL, 0x10, "Lcom.goodow.realtime.store.impl.DocumentImpl;", NULL,  },
    { "bridge_", NULL, 0x10, "Lcom.goodow.realtime.store.impl.DocumentBridge;", NULL,  },
    { "bytesUsed_", NULL, 0x0, "D", NULL,  },
    { "serverVersion_", NULL, 0x0, "D", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeStoreImplModelImpl = { 1, "ModelImpl", "com.goodow.realtime.store.impl", NULL, 0x0, 25, methods, 12, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplModelImpl;
}

@end

void ComGoodowRealtimeStoreImplModelImpl_beginCreationCompoundOperation(ComGoodowRealtimeStoreImplModelImpl *self) {
  [self beginCompoundOperationWithNSString:@"initialize"];
}

NSString *ComGoodowRealtimeStoreImplModelImpl_generateObjectId(ComGoodowRealtimeStoreImplModelImpl *self) {
  return JreStrcat("$$", @"gde", [((ComGoodowRealtimeChannelUtilIdGenerator *) [[ComGoodowRealtimeChannelUtilIdGenerator alloc] init]) nextWithInt:14]);
}

void ComGoodowRealtimeStoreImplModelImpl_registerIndexReferenceWithNSString_withNSString_(ComGoodowRealtimeStoreImplModelImpl *self, NSString *indexReference, NSString *referencedObject) {
  if (self->indexReferences_ == nil) {
    self->indexReferences_ = ComGoodowRealtimeJsonJson_createObject();
  }
  id<ComGoodowRealtimeJsonJsonArray> list = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(self->indexReferences_)) getArrayWithNSString:referencedObject];
  if (list == nil) {
    list = ComGoodowRealtimeJsonJson_createArray();
    (void) [self->indexReferences_ setWithNSString:referencedObject withId:list];
  }
  (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(list)) pushWithId:indexReference];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeStoreImplModelImpl)

@implementation ComGoodowRealtimeStoreImplModelImpl_$1

- (void)callWithNSString:(NSString *)key
                  withId:(id)value {
  id<ComGoodowRealtimeJsonJsonArray> serializedValue = ComGoodowRealtimeStoreImplJsonSerializer_serializeObjectWithId_(value);
  if (serializedValue == nil) {
    return;
  }
  ComGoodowRealtimeOperationMapJsonJsonMapComponent *op = [[ComGoodowRealtimeOperationMapJsonJsonMapComponent alloc] initWithNSString:val$id_ withNSString:key withComGoodowRealtimeJsonJsonElement:nil withComGoodowRealtimeJsonJsonElement:serializedValue];
  [((ComGoodowRealtimeStoreImplDocumentBridge *) nil_chk(this$0_->bridge_)) consumeAndSubmitWithComGoodowRealtimeOperationOperationComponent:op];
}

- (instancetype)initWithComGoodowRealtimeStoreImplModelImpl:(ComGoodowRealtimeStoreImplModelImpl *)outer$
                                               withNSString:(NSString *)capture$0 {
  this$0_ = outer$;
  val$id_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplModelImpl_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$id_ = val$id_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithNSString:withId:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplModelImpl:withNSString:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.ModelImpl;", NULL,  },
    { "val$id_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeStoreImplModelImpl_$1 = { 1, "$1", "com.goodow.realtime.store.impl", "ModelImpl", 0x8000, 2, methods, 2, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplModelImpl_$1;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeStoreImplModelImpl_$1)

@implementation ComGoodowRealtimeStoreImplModelImpl_$2

- (void)callWithInt:(jint)index
             withId:(NSString *)parent {
  if ([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(val$toRtn_)) indexOfWithId:parent] == -1) {
    (void) [val$toRtn_ pushWithId:parent];
  }
}

- (instancetype)initWithComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)capture$0 {
  val$toRtn_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplModelImpl_$2 *)other {
  [super copyAllFieldsTo:other];
  other->val$toRtn_ = val$toRtn_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithInt:withNSString:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeJsonJsonArray:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$toRtn_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeStoreImplModelImpl_$2 = { 1, "$2", "com.goodow.realtime.store.impl", "ModelImpl", 0x8000, 2, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplModelImpl_$2;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeStoreImplModelImpl_$2)

@implementation ComGoodowRealtimeStoreImplModelImpl_$3

- (void)callWithInt:(jint)idx
             withId:(NSString *)indexReferenceId {
  ComGoodowRealtimeStoreImplIndexReferenceImpl *indexReference = [this$0_ getObjectWithNSString:indexReferenceId];
  jint currentIndex = [((ComGoodowRealtimeStoreImplIndexReferenceImpl *) nil_chk(indexReference)) index];
  jint newIndex = [((ComGoodowRealtimeOperationListAbstractListComponent *) nil_chk(val$op_)) transformIndexReferenceWithInt:currentIndex withBoolean:YES withBoolean:[indexReference canBeDeleted]];
  if (newIndex != currentIndex) {
    [indexReference consumeWithNSString:val$userId_ withNSString:val$sessionId_ withComGoodowRealtimeOperationOperationComponent:[[ComGoodowRealtimeOperationCursorReferenceShiftedComponent alloc] initWithNSString:indexReferenceId withNSString:val$op_->id__ withInt:newIndex withBoolean:[indexReference canBeDeleted] withInt:currentIndex]];
  }
}

- (instancetype)initWithComGoodowRealtimeStoreImplModelImpl:(ComGoodowRealtimeStoreImplModelImpl *)outer$
    withComGoodowRealtimeOperationListAbstractListComponent:(ComGoodowRealtimeOperationListAbstractListComponent *)capture$0
                                               withNSString:(NSString *)capture$1
                                               withNSString:(NSString *)capture$2 {
  this$0_ = outer$;
  val$op_ = capture$0;
  val$userId_ = capture$1;
  val$sessionId_ = capture$2;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeStoreImplModelImpl_$3 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$op_ = val$op_;
  other->val$userId_ = val$userId_;
  other->val$sessionId_ = val$sessionId_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithInt:withNSString:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeStoreImplModelImpl:withComGoodowRealtimeOperationListAbstractListComponent:withNSString:withNSString:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.store.impl.ModelImpl;", NULL,  },
    { "val$op_", NULL, 0x1012, "Lcom.goodow.realtime.operation.list.AbstractListComponent;", NULL,  },
    { "val$userId_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$sessionId_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeStoreImplModelImpl_$3 = { 1, "$3", "com.goodow.realtime.store.impl", "ModelImpl", 0x8000, 2, methods, 4, fields, 0, NULL};
  return &_ComGoodowRealtimeStoreImplModelImpl_$3;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeStoreImplModelImpl_$3)
