//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: src/main/java/com/goodow/realtime/channel/rpc/SnapshotService.java
//
//  Created by retechretech on 13-5-25.
//

#import "IOSClass.h"
#import "com/goodow/realtime/channel/rpc/Constants.h"
#import "com/goodow/realtime/channel/rpc/Rpc.h"
#import "com/goodow/realtime/channel/rpc/RpcUtil.h"
#import "com/goodow/realtime/channel/rpc/SnapshotService.h"
#import "elemental/json/JsonObject.h"
#import "elemental/json/JsonValue.h"
#import "elemental/util/Collections.h"
#import "elemental/util/MapFromStringToString.h"
#import "java/lang/Boolean.h"
#import "java/lang/Throwable.h"
#import "java/util/logging/Level.h"
#import "java/util/logging/Logger.h"

@implementation ComGoodowRealtimeChannelRpcSnapshotService

static JavaUtilLoggingLogger * ComGoodowRealtimeChannelRpcSnapshotService_logger_;

@synthesize rpc = rpc_;

+ (JavaUtilLoggingLogger *)logger {
  return ComGoodowRealtimeChannelRpcSnapshotService_logger_;
}

- (id)initWithComGoodowRealtimeChannelRpcRpc:(id<ComGoodowRealtimeChannelRpcRpc>)rpc {
  if ((self = [super init])) {
    self.rpc = rpc;
  }
  return self;
}

- (void)load__WithNSString:(NSString *)id_
              withNSString:(NSString *)token
                  withBOOL:(BOOL)autoCreate
withComGoodowRealtimeChannelRpcSnapshotService_Callback:(id<ComGoodowRealtimeChannelRpcSnapshotService_Callback>)callback {
  id<ElementalUtilMapFromStringToString> params = [ElementalUtilCollections mapFromStringToString];
  [((id<ElementalUtilMapFromStringToString>) NIL_CHK(params)) putWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params ID] withNSString:id_];
  [((id<ElementalUtilMapFromStringToString>) NIL_CHK(params)) putWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params ACCESS_TOKEN] withNSString:token];
  [((id<ElementalUtilMapFromStringToString>) NIL_CHK(params)) putWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params AUTO_CREATE] withNSString:[NSString stringWithFormat:@"%@", [JavaLangBoolean toStringWithBOOL:autoCreate]]];
  [((id<ComGoodowRealtimeChannelRpcRpc>) NIL_CHK(rpc_)) getWithNSString:[ComGoodowRealtimeChannelRpcConstants_Services SNAPSHOT] withElementalUtilMapFromStringToString:params withComGoodowRealtimeChannelRpcRpc_RpcCallback:[[ComGoodowRealtimeChannelRpcSnapshotService_$1 alloc] initWithNSString:id_ withComGoodowRealtimeChannelRpcSnapshotService_Callback:callback]];
}

+ (void)initialize {
  if (self == [ComGoodowRealtimeChannelRpcSnapshotService class]) {
    ComGoodowRealtimeChannelRpcSnapshotService_logger_ = [JavaUtilLoggingLogger getLoggerWithNSString:[[IOSClass classWithClass:[ComGoodowRealtimeChannelRpcSnapshotService class]] getName]];
  }
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  ComGoodowRealtimeChannelRpcSnapshotService *typedCopy = (ComGoodowRealtimeChannelRpcSnapshotService *) copy;
  typedCopy.rpc = rpc_;
}

@end
@implementation ComGoodowRealtimeChannelRpcSnapshotService_$1

@synthesize val$id = val$id_;
@synthesize val$callback = val$callback_;

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((JavaUtilLoggingLogger *) NIL_CHK([ComGoodowRealtimeChannelRpcSnapshotService logger])) logWithJavaUtilLoggingLevel:[JavaUtilLoggingLevel WARNING] withNSString:[NSString stringWithFormat:@"Connection Error when get snapshot for %@", val$id_] withJavaLangThrowable:e];
}

- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((JavaUtilLoggingLogger *) NIL_CHK([ComGoodowRealtimeChannelRpcSnapshotService logger])) logWithJavaUtilLoggingLevel:[JavaUtilLoggingLevel SEVERE] withNSString:[NSString stringWithFormat:@"Fatal Error when get snapshot for %@", val$id_] withJavaLangThrowable:e];
}

- (void)onSuccessWithNSString:(NSString *)data {
  id<EMJsonObject> obj = ((id<EMJsonObject>) [ComGoodowRealtimeChannelRpcRpcUtil evalPrefixedWithNSString:data]);
  [((id<ComGoodowRealtimeChannelRpcSnapshotService_Callback>) NIL_CHK(val$callback_)) onSuccessWithEMJsonValue:[((id<EMJsonObject>) NIL_CHK(obj)) getWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params SNAPSHOT]] withNSString:[((id<EMJsonObject>) NIL_CHK(obj)) getStringWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params SESSION_ID]] withInt:(int) [((id<EMJsonObject>) NIL_CHK(obj)) getNumberWithNSString:[ComGoodowRealtimeChannelRpcConstants_Params REVISION]]];
}

- (id)initWithNSString:(NSString *)capture$0
withComGoodowRealtimeChannelRpcSnapshotService_Callback:(id<ComGoodowRealtimeChannelRpcSnapshotService_Callback>)capture$1 {
  if ((self = [super init])) {
    val$id_ = capture$0;
    val$callback_ = capture$1;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  ComGoodowRealtimeChannelRpcSnapshotService_$1 *typedCopy = (ComGoodowRealtimeChannelRpcSnapshotService_$1 *) copy;
  typedCopy.val$id = val$id_;
  typedCopy.val$callback = val$callback_;
}

@end
