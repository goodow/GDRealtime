//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//
//  Created by Larry Tin <dev@goodow.com>
//

#include "IOSClass.h"
#include "com/goodow/realtime/channel/ChannelDemuxer.h"
#include "com/goodow/realtime/channel/constant/Constants.h"
#include "com/goodow/realtime/channel/operation/GenericOperationChannel.h"
#include "com/goodow/realtime/channel/rpc/Rpc.h"
#include "com/goodow/realtime/channel/rpc/RpcUtil.h"
#include "com/goodow/realtime/channel/rpc/SaveService.h"
#include "elemental/json/Json.h"
#include "elemental/json/JsonFactory.h"
#include "elemental/json/JsonObject.h"
#include "elemental/json/JsonValue.h"
#include "elemental/util/Collections.h"
#include "elemental/util/MapFromStringToString.h"
#include "java/lang/Throwable.h"
#include "java/util/List.h"
#include "java/util/logging/Level.h"
#include "java/util/logging/Logger.h"

@implementation ComGoodowRealtimeChannelRpcSaveService

static JavaUtilLoggingLogger * ComGoodowRealtimeChannelRpcSaveService_log_;

+ (JavaUtilLoggingLogger *)log {
  return ComGoodowRealtimeChannelRpcSaveService_log_;
}

- (id)initWithComGoodowRealtimeChannelRpcRpc:(id<ComGoodowRealtimeChannelRpcRpc>)rpc {
  if (self = [super init]) {
    demuxer_ = [ComGoodowRealtimeChannelChannelDemuxer get];
    self->rpc_ = rpc;
  }
  return self;
}

- (void)callbackNotNeededWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
}

- (void)requestRevisionWithNSString:(NSString *)id_
                       withNSString:(NSString *)sessionId
withComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
  id<ElementalUtilMapFromStringToString> params = [ElementalUtilCollections mapFromStringToString];
  [((id<ElementalUtilMapFromStringToString>) nil_chk(params)) putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params ID] withNSString:id_];
  [params putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params ACCESS_TOKEN] withNSString:[((ComGoodowRealtimeChannelChannelDemuxer *) nil_chk(demuxer_)) getAccessToken]];
  (void) [((id<ComGoodowRealtimeChannelRpcRpc>) nil_chk(rpc_)) getWithNSString:[ComGoodowRealtimeChannelConstantConstants_Services REVISION] withElementalUtilMapFromStringToString:params withComGoodowRealtimeChannelRpcRpc_RpcCallback:[[ComGoodowRealtimeChannelRpcSaveService_$1 alloc] initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:callback]];
}

- (void)submitOperationsWithNSString:(NSString *)id_
                        withNSString:(NSString *)sessionId
                             withInt:(int)revision
                    withJavaUtilList:(id<JavaUtilList>)operations
withComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
  id<ElementalUtilMapFromStringToString> params = [ElementalUtilCollections mapFromStringToString];
  [((id<ElementalUtilMapFromStringToString>) nil_chk(params)) putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params ID] withNSString:id_];
  [params putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params ACCESS_TOKEN] withNSString:[((ComGoodowRealtimeChannelChannelDemuxer *) nil_chk(demuxer_)) getAccessToken]];
  [params putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params SESSION_ID] withNSString:sessionId];
  id<GDRJsonObject> formData = [GDRJson createObject];
  [((id<GDRJsonObject>) nil_chk(formData)) putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params REVISION] withDouble:revision];
  [formData putWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params CHANGES] withGDRJsonValue:[self serializeWithJavaUtilList:operations]];
  (void) [((id<ComGoodowRealtimeChannelRpcRpc>) nil_chk(rpc_)) postWithNSString:[ComGoodowRealtimeChannelConstantConstants_Services SAVE] withElementalUtilMapFromStringToString:params withNSString:[formData toJson] withComGoodowRealtimeChannelRpcRpc_RpcCallback:[[ComGoodowRealtimeChannelRpcSaveService_$2 alloc] initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:callback]];
}

- (id<GDRJsonValue>)serializeWithJavaUtilList:(id<JavaUtilList>)ops {
  return [((id<GDRJsonFactory>) nil_chk([GDRJson instance])) parseWithNSString:[((id<JavaUtilList>) nil_chk(ops)) description]];
}

+ (void)initialize {
  if (self == [ComGoodowRealtimeChannelRpcSaveService class]) {
    ComGoodowRealtimeChannelRpcSaveService_log_ = [JavaUtilLoggingLogger getLoggerWithNSString:[[IOSClass classWithClass:[ComGoodowRealtimeChannelRpcSaveService class]] getName]];
  }
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelRpcSaveService *)other {
  [super copyAllFieldsTo:other];
  other->demuxer_ = demuxer_;
  other->rpc_ = rpc_;
}

@end
@implementation ComGoodowRealtimeChannelRpcSaveService_$1

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onConnectionErrorWithJavaLangThrowable:e];
}

- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onFatalErrorWithJavaLangThrowable:e];
}

- (void)onSuccessWithNSString:(NSString *)data {
  [((JavaUtilLoggingLogger *) nil_chk([ComGoodowRealtimeChannelRpcSaveService log])) logWithJavaUtilLoggingLevel:[JavaUtilLoggingLevel FINE] withNSString:data];
  id<GDRJsonObject> connectResponse = [ComGoodowRealtimeChannelRpcRpcUtil evalPrefixedWithNSString:data];
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onSuccessWithInt:(int) [((id<GDRJsonObject>) nil_chk(connectResponse)) getNumberWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params REVISION]]];
}

- (id)initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

@end
@implementation ComGoodowRealtimeChannelRpcSaveService_$2

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onConnectionErrorWithJavaLangThrowable:e];
}

- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onFatalErrorWithJavaLangThrowable:e];
}

- (void)onSuccessWithNSString:(NSString *)data {
  id<GDRJsonObject> json = [ComGoodowRealtimeChannelRpcRpcUtil evalPrefixedWithNSString:data];
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onSuccessWithInt:(int) [((id<GDRJsonObject>) nil_chk(json)) getNumberWithNSString:[ComGoodowRealtimeChannelConstantConstants_Params REVISION]]];
}

- (id)initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

@end
