//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//
//  Created by Larry Tin <dev@goodow.com>
//

#include "IOSClass.h"
#include "com/goodow/realtime/channel/ChannelDemuxer.h"
#include "com/goodow/realtime/channel/constant/Constants.h"
#include "com/goodow/realtime/channel/operation/GenericOperationChannel.h"
#include "com/goodow/realtime/channel/rpc/Rpc.h"
#include "com/goodow/realtime/channel/rpc/RpcUtil.h"
#include "com/goodow/realtime/channel/rpc/SaveService.h"
#include "elemental/json/Json.h"
#include "elemental/json/JsonFactory.h"
#include "elemental/json/JsonObject.h"
#include "elemental/json/JsonValue.h"
#include "java/lang/Throwable.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/logging/Level.h"
#include "java/util/logging/Logger.h"

@implementation ComGoodowRealtimeChannelRpcSaveService

static JavaUtilLoggingLogger * ComGoodowRealtimeChannelRpcSaveService_log_;

+ (JavaUtilLoggingLogger *)log {
  return ComGoodowRealtimeChannelRpcSaveService_log_;
}

- (id)initWithComGoodowRealtimeChannelRpcRpc:(id<ComGoodowRealtimeChannelRpcRpc>)rpc {
  if (self = [super init]) {
    demuxer_ = [ComGoodowRealtimeChannelChannelDemuxer get];
    self->rpc_ = rpc;
  }
  return self;
}

- (void)callbackNotNeededWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
}

- (void)requestRevisionWithNSString:(NSString *)id_
                       withNSString:(NSString *)sessionId
withComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
  id<JavaUtilMap> params = [[JavaUtilHashMap alloc] init];
  (void) [params putWithId:[ComGoodowRealtimeChannelConstantConstants_Params ID] withId:id_];
  (void) [params putWithId:[ComGoodowRealtimeChannelConstantConstants_Params ACCESS_TOKEN] withId:[((ComGoodowRealtimeChannelChannelDemuxer *) nil_chk(demuxer_)) getAccessToken]];
  (void) [((id<ComGoodowRealtimeChannelRpcRpc>) nil_chk(rpc_)) getWithNSString:[ComGoodowRealtimeChannelConstantConstants_Services REVISION] withJavaUtilMap:params withComGoodowRealtimeChannelRpcRpc_RpcCallback:[[ComGoodowRealtimeChannelRpcSaveService_$1 alloc] initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:callback]];
}

- (void)submitOperationsWithNSString:(NSString *)id_
                        withNSString:(NSString *)sessionId
                             withInt:(int)revision
                    withJavaUtilList:(id<JavaUtilList>)operations
withComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)callback {
  id<JavaUtilMap> params = [[JavaUtilHashMap alloc] init];
  (void) [params putWithId:[ComGoodowRealtimeChannelConstantConstants_Params ID] withId:id_];
  (void) [params putWithId:[ComGoodowRealtimeChannelConstantConstants_Params ACCESS_TOKEN] withId:[((ComGoodowRealtimeChannelChannelDemuxer *) nil_chk(demuxer_)) getAccessToken]];
  (void) [params putWithId:[ComGoodowRealtimeChannelConstantConstants_Params SESSION_ID] withId:sessionId];
  id<GDJsonObject> formData = [GDJson createObject];
  [((id<GDJsonObject>) nil_chk(formData)) set:[ComGoodowRealtimeChannelConstantConstants_Params REVISION] number:revision];
  [formData set:[ComGoodowRealtimeChannelConstantConstants_Params CHANGES] value:[self serializeWithJavaUtilList:operations]];
  (void) [((id<ComGoodowRealtimeChannelRpcRpc>) nil_chk(rpc_)) postWithNSString:[ComGoodowRealtimeChannelConstantConstants_Services SAVE] withJavaUtilMap:params withNSString:[formData toJson] withComGoodowRealtimeChannelRpcRpc_RpcCallback:[[ComGoodowRealtimeChannelRpcSaveService_$2 alloc] initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:callback]];
}

- (id<GDJsonValue>)serializeWithJavaUtilList:(id<JavaUtilList>)ops {
  return [((id<GDJsonFactory>) nil_chk([GDJson instance])) parseWithNSString:[((id<JavaUtilList>) nil_chk(ops)) description]];
}

+ (void)initialize {
  if (self == [ComGoodowRealtimeChannelRpcSaveService class]) {
    ComGoodowRealtimeChannelRpcSaveService_log_ = [JavaUtilLoggingLogger getLoggerWithNSString:[[IOSClass classWithClass:[ComGoodowRealtimeChannelRpcSaveService class]] getName]];
  }
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelRpcSaveService *)other {
  [super copyAllFieldsTo:other];
  other->demuxer_ = demuxer_;
  other->rpc_ = rpc_;
}

@end
@implementation ComGoodowRealtimeChannelRpcSaveService_$1

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onConnectionErrorWithJavaLangThrowable:e];
}

- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onFatalErrorWithJavaLangThrowable:e];
}

- (void)onSuccessWithNSString:(NSString *)data {
  [((JavaUtilLoggingLogger *) nil_chk([ComGoodowRealtimeChannelRpcSaveService log])) logWithJavaUtilLoggingLevel:[JavaUtilLoggingLevel FINE] withNSString:data];
  id<GDJsonObject> connectResponse = [ComGoodowRealtimeChannelRpcRpcUtil evalPrefixedWithNSString:data];
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onSuccessWithInt:(int) [((id<GDJsonObject>) nil_chk(connectResponse)) getNumber:[ComGoodowRealtimeChannelConstantConstants_Params REVISION]]];
}

- (id)initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

@end
@implementation ComGoodowRealtimeChannelRpcSaveService_$2

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onConnectionErrorWithJavaLangThrowable:e];
}

- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e {
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onFatalErrorWithJavaLangThrowable:e];
}

- (void)onSuccessWithNSString:(NSString *)data {
  id<GDJsonObject> json = [ComGoodowRealtimeChannelRpcRpcUtil evalPrefixedWithNSString:data];
  [((id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>) nil_chk(val$callback_)) onSuccessWithInt:(int) [((id<GDJsonObject>) nil_chk(json)) getNumber:[ComGoodowRealtimeChannelConstantConstants_Params REVISION]]];
}

- (id)initWithComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_SendOpService_Callback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

@end
