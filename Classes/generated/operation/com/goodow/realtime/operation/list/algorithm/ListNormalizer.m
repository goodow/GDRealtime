//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: src/main/java/com/goodow/realtime/operation/list/algorithm/ListNormalizer.java
//
//  Created by retechretech on 13-5-25.
//

#import "com/goodow/realtime/operation/list/algorithm/ListNormalizer.h"
#import "com/goodow/realtime/operation/list/algorithm/ListOp.h"
#import "java/lang/UnsupportedOperationException.h"

@implementation ComGoodowRealtimeOperationListAlgorithmListNormalizer

- (ComGoodowRealtimeOperationListAlgorithmListOp *)output {
  return output_;
}
- (void)setOutput:(ComGoodowRealtimeOperationListAlgorithmListOp *)output {
  JreOperatorRetainedAssign(&output_, output);
}
@synthesize output = output_;
- (id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>)appender {
  return appender_;
}
- (void)setAppender:(id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>)appender {
  JreOperatorRetainedAssign(&appender_, appender);
}
@synthesize appender = appender_;
- (ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum *)component {
  return component_;
}
- (void)setComponent:(ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum *)component {
  JreOperatorRetainedAssign(&component_, component);
}
@synthesize component = component_;
@synthesize retain_ = retain__;

- (id)initWithComGoodowRealtimeOperationListAlgorithmListOp:(ComGoodowRealtimeOperationListAlgorithmListOp *)output
withComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender:(id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>)appender {
  if ((self = [super init])) {
    self.output = output;
    self.appender = appender;
  }
  return self;
}

- (ComGoodowRealtimeOperationListAlgorithmListNormalizer *)delete__WithId:(id)list {
  if (![self isEmptyWithId:list]) {
    if (component_ != [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum DELETE]) {
      [self flush];
    }
    JreOperatorRetainedAssign(&component_, [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum DELETE]);
    [((id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>) NIL_CHK(appender_)) appendWithId:list];
  }
  return self;
}

- (ComGoodowRealtimeOperationListAlgorithmListOp *)finish {
  [self flush];
  return output_;
}

- (ComGoodowRealtimeOperationListAlgorithmListNormalizer *)insertWithId:(id)list {
  if (![self isEmptyWithId:list]) {
    if (component_ != [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum INSERT]) {
      [self flush];
    }
    JreOperatorRetainedAssign(&component_, [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum INSERT]);
    [((id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>) NIL_CHK(appender_)) appendWithId:list];
  }
  return self;
}

- (ComGoodowRealtimeOperationListAlgorithmListNormalizer *)retain__WithInt:(int)length {
  if (length > 0) {
    if (component_ != [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum RETAIN]) {
      [self flush];
    }
    JreOperatorRetainedAssign(&component_, [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum RETAIN]);
    retain__ += length;
  }
  return self;
}

- (NSString *)description {
  return [NSString stringWithFormat:@"%@\n%@: %@", [((ComGoodowRealtimeOperationListAlgorithmListOp *) NIL_CHK(output_)) description], component_, (component_ == [ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum RETAIN] ? [NSString stringWithFormat:@"%d", retain__] : [((id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>) NIL_CHK(appender_)) description])];
}

- (BOOL)isEmptyWithId:(id)list {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)flush {
  if (component_ == nil) {
    return;
  }
  switch ([component_ ordinal]) {
    case ComGoodowRealtimeOperationListAlgorithmListOp_ComponentType_INSERT:
    [((ComGoodowRealtimeOperationListAlgorithmListOp *) NIL_CHK(output_)) insertWithId:[((id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>) NIL_CHK(appender_)) flush]];
    break;
    case ComGoodowRealtimeOperationListAlgorithmListOp_ComponentType_DELETE:
    [((ComGoodowRealtimeOperationListAlgorithmListOp *) NIL_CHK(output_)) delete__WithId:[((id<ComGoodowRealtimeOperationListAlgorithmListNormalizer_Appender>) NIL_CHK(appender_)) flush]];
    break;
    case ComGoodowRealtimeOperationListAlgorithmListOp_ComponentType_RETAIN:
    [((ComGoodowRealtimeOperationListAlgorithmListOp *) NIL_CHK(output_)) retain__WithInt:retain__];
    retain__ = 0;
    break;
    default:
    @throw [[[JavaLangUnsupportedOperationException alloc] initWithNSString:[((ComGoodowRealtimeOperationListAlgorithmListOp_ComponentTypeEnum *) NIL_CHK(component_)) name]] autorelease];
  }
}

- (void)dealloc {
  JreOperatorRetainedAssign(&component_, nil);
  JreOperatorRetainedAssign(&appender_, nil);
  JreOperatorRetainedAssign(&output_, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  ComGoodowRealtimeOperationListAlgorithmListNormalizer *typedCopy = (ComGoodowRealtimeOperationListAlgorithmListNormalizer *) copy;
  typedCopy.output = output_;
  typedCopy.appender = appender_;
  typedCopy.component = component_;
  typedCopy.retain_ = retain__;
}

@end
