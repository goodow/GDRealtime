//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//
//  Created by Larry Tin <dev@goodow.com>
//

#ifndef _ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_H_
#define _ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_H_

@class ComGoodowRealtimeChannelChannelDemuxer;
@class ComGoodowRealtimeChannelRpcDeltaService;
@class JavaLangThrowable;
@class JavaUtilLoggingLogger;
@protocol ComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel_Listener;
@protocol ComGoodowRealtimeChannelRpcRpc;
@protocol ComGoodowRealtimeOperationTransformer;
@protocol ElementalUtilMapFromIntTo;
@protocol GDRJsonObject;

#import "JreEmulation.h"
#include "com/goodow/realtime/channel/operation/GenericOperationChannel.h"
#include "com/goodow/realtime/channel/rpc/DeltaService.h"
#include "java/lang/Runnable.h"

#define ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_CATCHUP_DELAY_MILLIS 3000

@interface ComGoodowRealtimeChannelOperationReceiveOpChannelImpl : NSObject < ComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel > {
 @public
  BOOL isCatchupTaskScheduled_;
  id<JavaLangRunnable> catchupTask_;
  id<ComGoodowRealtimeChannelRpcDeltaService_Callback> callback_;
  ComGoodowRealtimeChannelChannelDemuxer *demuxer_;
  id<ElementalUtilMapFromIntTo> pending_;
  NSString *id__;
  ComGoodowRealtimeChannelRpcDeltaService *service_;
  id<ComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel_Listener> listener_;
  int currentRevision_;
  int knownHeadRevision_;
  int catchupRevision_;
  id<ComGoodowRealtimeOperationTransformer> transformer_;
  BOOL corruptedByException_;
  BOOL receiving_;
}

+ (JavaUtilLoggingLogger *)log;
- (id)initWithNSString:(NSString *)id_
withComGoodowRealtimeChannelRpcRpc:(id<ComGoodowRealtimeChannelRpcRpc>)rpc
withComGoodowRealtimeOperationTransformer:(id<ComGoodowRealtimeOperationTransformer>)transformer;
- (void)connectWithInt:(int)revision
withComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel_Listener:(id<ComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel_Listener>)listener;
- (void)disconnect;
- (void)onKnownHeadRevisionWithInt:(int)headVersion;
- (void)onMessageWithInt:(int)resultingRevision
            withNSString:(NSString *)sid
                  withId:(id)mutation;
- (void)onMessageWithGDRJsonObject:(id<GDRJsonObject>)msg;
- (int)revision;
- (void)maybeCatchup;
- (void)receiveUnorderedDataWithInt:(int)resultingRevision
                       withNSString:(NSString *)sessionId
                             withId:(id)op;
- (void)scheduleCatchup;
- (void)unguardedReceiveUnorderedDataWithInt:(int)resultingRevision
                                withNSString:(NSString *)sessionId
                                      withId:(id)op;
- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *)other;
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, catchupTask_, id<JavaLangRunnable>)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, callback_, id<ComGoodowRealtimeChannelRpcDeltaService_Callback>)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, demuxer_, ComGoodowRealtimeChannelChannelDemuxer *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, pending_, id<ElementalUtilMapFromIntTo>)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, id__, NSString *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, service_, ComGoodowRealtimeChannelRpcDeltaService *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, listener_, id<ComGoodowRealtimeChannelOperationGenericOperationChannel_ReceiveOpChannel_Listener>)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl, transformer_, id<ComGoodowRealtimeOperationTransformer>)

@interface ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_$1 : NSObject < JavaLangRunnable > {
 @public
  ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *this$0_;
}

- (void)run;
- (id)initWithComGoodowRealtimeChannelOperationReceiveOpChannelImpl:(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *)outer$;
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_$1, this$0_, ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *)

@interface ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_$2 : NSObject < ComGoodowRealtimeChannelRpcDeltaService_Callback > {
 @public
  ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *this$0_;
}

- (void)onConnectionErrorWithJavaLangThrowable:(JavaLangThrowable *)e;
- (void)onFatalErrorWithJavaLangThrowable:(JavaLangThrowable *)e;
- (void)onMessageWithGDRJsonObject:(id<GDRJsonObject>)msg;
- (id)initWithComGoodowRealtimeChannelOperationReceiveOpChannelImpl:(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *)outer$;
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_$2, this$0_, ComGoodowRealtimeChannelOperationReceiveOpChannelImpl *)

#endif // _ComGoodowRealtimeChannelOperationReceiveOpChannelImpl_H_
